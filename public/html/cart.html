<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>BuyPlus(败家Shopping）</title>
    <meta name="description" content="BuyPlus(败家Shopping）" />
    <meta name="keywords" content= "BuyPlus(败家Shopping）" />
    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen" />
    <link href="/static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/front/css/stylesheet.css" rel="stylesheet">
    <link href="image/catalog/cart.png" rel="icon" />
    <!-- 扩展Css样式用 -->
    


    </head>
    <body class="common-home">

    <nav id="top">
    <div class="container">
        <div id="top-links" class="nav pull-right">
            <ul class="list-inline">
                <li>
                    <a href=""> <i class="fa fa-phone"></i>
                    </a>
                    <span class="hidden-xs hidden-sm hidden-md" id="span-telphone"></span>
                </li>
                <li class="dropdown">
                    <a href="" title="会员中心" class="dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-user"></i>
                        <span class="hidden-xs hidden-sm hidden-md">会员中心</span>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right">
                        <li>
                            <a href="/front/member/register.html">会员注册</a>
                        </li>
                        <li>
                            <a href="/front/member/login.html">会员登录</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="" id="wishlist-total" title="收藏（0）">
                        <i class="fa fa-heart"></i>
                        <span class="hidden-xs hidden-sm hidden-md">收藏（0）</span>
                    </a>
                </li>
                <li>
                    <a href="/html/cart.html" title="购物车">
                        <i class="fa fa-shopping-cart"></i>
                        <span class="hidden-xs hidden-sm hidden-md">购物车</span>
                    </a>
                </li>
                <li>
                    <a href="" title="结账">
                        <i class="fa fa-share"></i>
                        <span class="hidden-xs hidden-sm hidden-md">结账</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
    <header>
    <div class="container">
        <div class="row">
            <div class="col-sm-4">
                <div id="logo">
                    <a href="/html/index.html">
                        <img src="/static/image/logo-front.png" title="BuyPlus(败家Shopping）" alt="BuyPlus(败家Shopping）" class="img-responsive" />
                    </a>
                </div>
            </div>
            <div class="col-sm-8 mini-cart">
                <div id="cart">
                    <a href="/html/cart.html" class="cart-info">
                  <span class="cart-icon">
                    <i class="fa fa-shopping-cart"></i>
                  </span>
                        <span id="mini-cart-title" >0 个商品 - ￥0.00</span>
                    </a>
                    <div id="mini-product-list li.non-product">
                      <ul class="cart-content dropdown-menu hidden-sm hidden-xs">
                        <li>
                          <p class="text-center empty">您的购物车内没有商品！</p>
                        </li>
                      </ul>
                    </div>
                    <div id="mini-product-list li.has-product">
                    <ul class="cart-content dropdown-menu hidden-sm hidden-xs">
                        <li>
                            <table class="table table-striped" id="mini-table-product-list">
                                <tbody>
                                <tr>
                                    <td class="text-center">
                                        <a href="">
                                            <img src="" alt="" title="" class="img-thumbnail"></a>
                                    </td>
                                    <td class="text-left">
                                        <a href="">商品名称</a>
                                        <br>
                                        x 1
                                        <br>
                                        -
                                        <small>型号</small>
                                    </td>
                                    <td class="text-right">
                                        ￥5,290.00
                                        <a class="remove" id="mini-cart-remove">移除</a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </li>
                        <li>
                            <div>
                                <table class="table table-bordered">
                                    <tbody>
                                    <tr>
                                        <td class="text-right"> <strong>商品总额</strong>
                                        </td>
                                        <td class="text-right" id="mini-cart-amount">￥0.00</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <p class="text-right">
                                    <a href="/html/cart.html">
                                        <strong><i class="fa fa-shopping-cart"></i>
                                            查看购物车</strong>
                                    </a>
                                    &nbsp;&nbsp;&nbsp;
                                    <a href="">
                                        <strong><i class="fa fa-share"></i>
                                            去结账</strong>
                                    </a>
                                </p>
                            </div>
                        </li>
                    </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
    <div class="main-menu-wrapper">
    <div class="container">
        <div class="main-menu-mobile">
            菜单
            <span class="main-menu-toggle">
              <i class="fa fa-bars"></i>
            </span>
        </div>
        <div class="main-menu-container">
            <ul class="main-menu" id="ul-menu">
                <li class="parent">
                    <a href="">首页</a>
                </li>
            </ul>
        </div>
        <div id="search" class="input-group">
            <input type="text" name="search" value="" placeholder="搜索" class="form-control" />
            <span class="input-group-btn">
              <button type="button" class="btn btn-primary">
                <i class="fa fa-search"></i>
              </button>
            </span>
        </div>
    </div>
</div>


    

<div class="container">
    <ul class="breadcrumb">
        <li>
            <a href="/html/index.html.html">
                <i class="fa fa-home"></i>
            </a>
        </li>
        <li>
            <a href="/html/cart.html.html">购物车内的商品</a>
        </li>
    </ul>
    <div class="row">
        <form action="/front/member/checkout.html" method="post" enctype="multipart/form-data">
            <div class="table-responsive">
                <table class="table table-bordered" id="cart-product-list">
                    <thead>
                    <tr>
                        <td style="width:1px;" class="text-center">
                            <input type="checkbox" id="checked-all" class="input-primary">
                        </td>
                        <td class="text-center">图片</td>
                        <td class="text-left">商品名称</td>
                        <td class="text-left">型号</td>
                        <td class="text-left">数量</td>
                        <td class="text-right">单价</td>
                        <td class="text-right">总计</td>
                    </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>

            <div class="row">
                <div class="col-sm-4 col-sm-offset-8">
                    <table class="table table-bordered">
                        <tr>
                            <td class="text-right"><strong>商品总额:</strong>
                            </td>
                            <td class="text-right" id="cart-amount">￥</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="buttons">
                <div class="pull-left">
                    <a href="/html/index.html" class="btn btn-default">继续购物</a>
                </div>
                <div class="pull-right">
                    <input type="submit" class="btn btn-primary" value="去结算">
                </div>
            </div>
        </form>
    </div>
</div>


    <footer>
    <div class="container">
        <div class="row">
            <div class="col-sm-2">
                <h5>信息咨询</h5>
                <ul class="list-unstyled">
                    <li>
                        <a href="">关于我们</a>
                    </li>
                    <li>
                        <a href="">最新公告</a>
                    </li>
                    <li>
                        <a href="">隐私政策</a>
                    </li>
                    <li>
                        <a href="">条款及条件</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-2">
                <h5>客户服务</h5>
                <ul class="list-unstyled">
                    <li>
                        <a href="">联系我们</a>
                    </li>
                    <li>
                        <a href="">退换服务</a>
                    </li>
                    <li>
                        <a href="">网站地图</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-2">
                <h5>其他</h5>
                <ul class="list-unstyled">
                    <li>
                        <a href="">品牌专区</a>
                    </li>
                    <li>
                        <a href="">礼品券</a>
                    </li>
                    <li>
                        <a href="">加盟会员</a>
                    </li>
                    <li>
                        <a href="">特别优惠</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-2">
                <h5>会员中心</h5>
                <ul class="list-unstyled">
                    <li>
                        <a href="">会员中心</a>
                    </li>
                    <li>
                        <a href="">历史订单</a>
                    </li>
                    <li>
                        <a href="">收藏列表</a>
                    </li>
                    <li>
                        <a href="">订阅咨询</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h5>联系我们</h5>
                <ul class="list-unstyled">
                    <li>
                        <div class="icon">
                            <span class="fa fa-map-marker">&nbsp;</span>
                        </div>
                        <div class="text">科技有限公司</div>
                    </li>
                    <li>
                        <div class="icon">
                            <span class="fa fa-phone">&nbsp;</span>
                        </div>
                        <div class="text">123456789</div>
                    </li>
                    <li>
                        <div class="icon">
                            <span class="fa fa-envelope">&nbsp;</span>
                        </div>
                        <div class="text">kang@kang.com</div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <div class="powered">
            BuyPlush(败家Shopping) &copy; 2016
            <a href="http://www.miitbeian.gov.cn/" target="_blank">京ICP备12345678号</a>
        </div>
    </div>
    <div class="go-top">
        <a href="#" class="scroll-top">
            <i class="fa fa-angle-up"></i>
            TOP
        </a>
    </div>
</footer>
    <!-- 引入自定义的前台变量(为了防止一些引入的方法文件里php方法不解析) -->
    <script>
	var StaticPath = "/static/";
	var PublicPath = "/";
	var ThumbPath = "/thumb/";
	var UploadPath = "/uploads/";

	var urlShopInit = "/shopInit.html";
	var urlCategoryInit = "/categoryList.html"
	var urlProductList = "/productList.html";

	var urlCartAdd = "/cartAdd.html";
	var urlCartInfo = "/cartInfo.html";
	var urlCartUpdate = "/cartUpdate.html";
	var urlCartRemove = "/cartRemove.html";



</script>

    <script src="/static/jquery/jquery-1.12.4.min.js" type="text/javascript"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/static/front/js/common.js" type="text/javascript"></script>
    <script src="/static/front/js/init.js"></script>
    <script src="/static/front/js/category.js"></script>
    <script src="/static/front/js/cart.js"></script>
    <!-- 迷你购物车 -->
    <script>
        //页面加载,初始化一次
        $(function(){
            cart.refreshMini();
        })
    </script>
    <!-- 扩展Js用 -->
    
<script>

	
    

	// 更新购物车展示
	function refreshCart()
	{
		cart.info({
			success:function(data){
				//展示
				$('#cart-amount').text('￥' + data.amount);
				$('#cart-product-list tbody').empty();
				
				$.each(data.productList, function(i, product)
				{
					var html = '';
					html += '<tr>';
					html += '<td class="text-center">';
					html += '<input type="checkbox" name="selected[]" value="'+product.id+'" class="form-control">'; 
					html += '</td>'; 
					html += '<td class="text-center">';
					html += '<a href="">';
					html += '<img src="'+ThumbPath+product.image_thumb+'" style="max-height: 60px;" alt="" title="" class="img-thumbnail"/>';                   
					html += '</a>';                   
					html += '</td>';                   
					html += '<td class="text-left">';                   
					html += '<a href="">'+product.title+'</a>';                   
					html += '</td>';                   
					html += '<td class="text-left">';                   
					html += (product.valueList ? product.valueList : '');                       
					html += '</td>';                  
					html += '<td class="text-left">';                   
					html += '<div class="input-group btn-block" style="max-width: 200px;">';
					html += '<input type="text" name="product['+product.id+']" id="quantity-'+product.id+'" value="'+product.buyQuantity+'" size="1" class="form-control"/>';
					html += '<span class="input-group-btn">';                   
					html += '<button id="cart-update" data-toggle="tooltip" data-product-id="'+product.id+'" title="更新" class="btn btn-primary">';                   
					html += '<i class="fa fa-refresh"></i>';                   
					html += '</button>';                   
					html += '<button id="cart-remove" data-toggle="tooltip" data-product-id="'+product.id+'" title="移除" class="btn btn-danger" >';                   
					html += '<i class="fa fa-times-circle"></i>';                   
					html += '</button>';                   
					html += '</span>';                   
					html += '</div>';                  
					html += '</td>';                   
					html += '<td class="text-right">￥'+product.price+'</td>';                   
					html += '<td class="text-right">￥'+product.amount+'</td>';                   
					html += '</tr>';	
					//展示
					$('#cart-product-list>tbody').append(html);
				});
			}
		});
	}


	$(function(){

		// 页面初始化时刷新
    	refreshCart();

		//购物车更新 
		$('#cart-product-list').delegate('#cart-update','click',function(evt){
			
			//更新购物车
			var url = urlCartUpdate;
			var product_id = $(this).data('productId');
			console.log(product_id);
			var buyQuantity = $('#quantity-'+product_id).val();
			console.log(buyQuantity);
			var data={
				product_id:product_id,
				buyQuantity:buyQuantity
			};
			$.post(url ,data ,function(resp){
				if(!resp.error){
					//刷新mini购物车
					cart.refreshMini();
					//刷新购物车展示
					refreshCart();
				}
			},'json');
			evt.preventDefault();
			
		});

		//购物车移除
		$('#cart-product-list').delegate('#cart-remove','click',function(evt){

			var url = urlCartRemove;
			var product_id = $(this).data('productId');
			console.log(product_id);
			var data = {
				product_id:product_id
			}
			$.post(url ,data ,function(resp){
				if(!resp.error){
					//刷新mini购物车
					cart.refreshMini();
					//刷新购物车展示
					refreshCart();
					alert('移除成功!');
				}
			},'json');

			// evt.preventDefault();
		});
	})
</script>


</body>
</html>
